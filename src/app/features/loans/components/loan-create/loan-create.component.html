<h2 class="text-xl font-bold">Create Loan</h2>
<br>

<form  [formGroup]="loanForm" (ngSubmit)="onSubmit()" >
    <div class="mb-6">
        <label for="amount" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
          Loan Amount
        </label>
        <div class="relative mb-6">
          <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
            <span class="text-gray-500 dark:text-gray-400 text-sm font-medium">S/.</span>
          </div>
          <input
            type="text"
            id="loan-amount"
            name="amount"
            formControlName="amountDisplay"
            (input)="onAmountInput($event)"
            (blur)="onAmountBlur($event)"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-12 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            placeholder="0.00"
          >
        </div>
        <p *ngIf="submitted && loanForm.get('amountDisplay')?.invalid"
          class="mt-1 text-sm text-red-600">
          Loan amount is required.
        </p>
    </div>
    <div class="mb-6">
        <label for="BorrowerName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Borrower's Name</label>
        <input type="text" id="borrowerName" formControlName="borrowerName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
        <p *ngIf="submitted && loanForm.get('borrowerName')?.invalid"
          class="mt-1 text-sm text-red-600">
          Borrower name is required.
        </p>
    </div>
    <div class="mb-6">
        <label for="durationMonths" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Duration Months</label>
        <input type="number" id="durationMonths" formControlName="durationMonths" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
        <p *ngIf="submitted && loanForm.get('durationMonths')?.invalid"
          class="mt-1 text-sm text-red-600">
          Duration Months is required.
        </p>
    </div>
    <div class="mb-6">
      <label for="repaymentModality" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Repayment Modality</label>
      <select formControlName="repaymentModality" id="repaymentModality" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        <option *ngFor="let o of repaymentModalityOptions" [ngValue]="o.value">
          {{ o.label }}
        </option>
      </select>
      <p *ngIf="submitted && loanForm.get('repaymentModality')?.invalid"
        class="mt-1 text-sm text-red-600">
        Repayment Modality is required.
      </p>
    </div>
    <div class="mb-6">
      <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Save</button>
      &nbsp;
      <a
        [routerLink]="['/loans']"
        class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 text-sm font-medium rounded-md shadow-sm transition-colors duration-200"
      >
        <!-- Heroicon: Arrow Left -->
        <svg
          class="w-4 h-4 mr-2"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Loans
      </a>
    </div>
</form>

